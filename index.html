<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Ocean Data Access • oceandatr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Ocean Data Access">
<meta name="description" content="For retrieving and gridding ocean related data.">
<meta property="og:description" content="For retrieving and gridding ocean related data.">
<meta property="og:image" content="https://emlab-ucsb.github.io/oceandatr/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">oceandatr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/getboundary.html">Retrieving boundaries with get_boundary()</a></li>
    <li><a class="dropdown-item" href="articles/pacific_high_seas_example.html">Pacific High Seas Example</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="oceandatr-">oceandatr 
<a class="anchor" aria-label="anchor" href="#oceandatr-"></a>
</h1>
</div>
<!-- badges: start -->
<!-- badges: end -->
<p><code>oceandatr</code> aims to provide simple functions for retrieving ocean data. Using the associated package <code>spatialgridr</code>, it can also easily grid data, which is useful for various purposes including spatial conservation prioritization.</p>
<p>Fish images in logo modified from original by Tracey Saxby, <a href="https://ian.umces.edu/media-library" class="external-link">Integration and Application Network</a></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install oceandatr from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="co">#might need to increase timeout as it is a large package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>timeout <span class="op">=</span> <span class="fl">9999</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"emlab-ucsb/oceandatr"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="getting-gridded-ocean-data">Getting gridded ocean data<a class="anchor" aria-label="anchor" href="#getting-gridded-ocean-data"></a>
</h1>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#load oceandatr package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://emlab-ucsb.github.io/oceandatr/">oceandatr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="obtain-an-eez-for-an-area-of-interest">Obtain an EEZ for an area of interest<a class="anchor" aria-label="anchor" href="#obtain-an-eez-for-an-area-of-interest"></a>
</h3>
<p>First we need a boundary for the area we are interested in. We can use the <code><a href="https://emlab-ucsb.github.io/spatialgridr/reference/get_boundary.html" class="external-link">get_boundary()</a></code> function, imported from <code>spatialgridr</code>, to get a boundary for land or ocean. In this example we will get Bermuda’s Exclusive Economic Zone (EEZ)</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bermuda_eez</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://emlab-ucsb.github.io/spatialgridr/reference/get_boundary.html" class="external-link">get_boundary</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Bermuda"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#plot to check we have Bermuda's EEZ</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bermuda_eez</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, col <span class="op">=</span> <span class="st">"lightblue"</span>, main<span class="op">=</span><span class="cn">NULL</span>, axes<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-area_of_interest-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="get-a-grid">Get a grid<a class="anchor" aria-label="anchor" href="#get-a-grid"></a>
</h2>
<p>We are going to get gridded data. To create a grid for Bermuda, we use <code><a href="https://emlab-ucsb.github.io/spatialgridr/reference/get_grid.html" class="external-link">get_grid()</a></code>. We need to provide a suitable projection for the area we are interested in, <a href="https://projectionwizard.org" class="external-link uri">https://projectionwizard.org</a> is useful for this purpose. Standard projections used for countries can also be found at <a href="https://epsg.io/" class="external-link uri">https://epsg.io/</a> by searching with country name. For spatial planning, equal area projections are normally best.</p>
<p>The bounding box coordinates for the area of interest can be found using <code>sf::st_bbox(bermuda_eez)</code> and these can then be used to generate the coordinate reference system (CRS) on <a href="https://projectionwizard.org" class="external-link">projection wizard</a></p>
<p>The coordinates above should be entered as the ‘Geographic extent’ and the map should then have a box drawn around the bounding box of the area of interest. The projection can then be copied and pasted from the pop-up box when clicking on ‘WKT’ or ‘PROJ’. For brevity, we are using the PROJ string, but WKT is now <a href="https://inbo.github.io/tutorials/tutorials/spatial_crs_coding/" class="external-link">generally preferred</a>. The projection needs to be placed in quotation marks as follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">projection_bermuda</span> <span class="op">&lt;-</span> <span class="st">'+proj=laea +lon_0=-64.8108333 +lat_0=32.3571917 +datum=WGS84 +units=m +no_defs'</span></span></code></pre></div>
<p>We can now create a grid for Bermuda’s EEZ using <code><a href="https://emlab-ucsb.github.io/spatialgridr/reference/get_grid.html" class="external-link">get_grid()</a></code>. Along with the projection we found above, we will need to set a resolution: how wide and high will each grid cell be, in this case in metres. The units will depend on your crs and can be found using e.g. <code>sf::st_crs(projection_bermuda, parameters = TRUE)$units_gdal</code></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bermuda_grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://emlab-ucsb.github.io/spatialgridr/reference/get_grid.html" class="external-link">get_grid</a></span><span class="op">(</span>boundary <span class="op">=</span> <span class="va">bermuda_eez</span>, resolution <span class="op">=</span> <span class="fl">5000</span>, crs <span class="op">=</span> <span class="va">projection_bermuda</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#project the eez into same projection as grid for plotting</span></span>
<span><span class="va">bermuda_eez_projected</span> <span class="op">&lt;-</span> <span class="va">bermuda_eez</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="va">projection_bermuda</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#plot the grid</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bermuda_grid</span>, col <span class="op">=</span> <span class="st">"gold3"</span>, axes <span class="op">=</span> <span class="cn">FALSE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bermuda_eez_projected</span>, add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-bermuda-grid-1.png" style="display: block; margin: auto;"></p>
<p>The raster covers Bermuda’s EEZ. The grid cells would be too small to see if we plotted them, but here is a coarser grid (lower resolution) visualized so we can see what the grid cells look like.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bermuda_grid_coarse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://emlab-ucsb.github.io/spatialgridr/reference/get_grid.html" class="external-link">get_grid</a></span><span class="op">(</span>boundary <span class="op">=</span> <span class="va">bermuda_eez</span>, resolution <span class="op">=</span> <span class="fl">20000</span>, crs <span class="op">=</span> <span class="va">projection_bermuda</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bermuda_eez_projected</span>, axes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/as.polygons.html" class="external-link">as.polygons</a></span><span class="op">(</span><span class="va">bermuda_grid_coarse</span>, dissolve <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>, add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-grid_cells-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="get-bathymetry">Get bathymetry<a class="anchor" aria-label="anchor" href="#get-bathymetry"></a>
</h2>
<p>Now we have a grid, we can get some data. A key piece of data is bathymetry. If the user has bathymetry data for their area of interest already, they can pass the file path to this function and it will grid the data using the supplied spatial grid. If no file path is provided, the function will extract bathymetry data for the area from the <a href="https://www.ncei.noaa.gov/products/etopo-global-relief-model" class="external-link">ETOPO 2022 Global Relief model</a> using a function borrowed from the <a href="https://cran.r-project.org/web/packages/marmap/index.html" class="external-link"><code>marmap</code></a> package.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bathymetry</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_bathymetry.html">get_bathymetry</a></span><span class="op">(</span>spatial_grid <span class="op">=</span> <span class="va">bermuda_grid</span>, classify_bathymetry <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; This may take seconds to minutes, depending on grid size</span></span>
<span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bathymetry</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">255</span>, <span class="st">"Blues"</span><span class="op">)</span>, axes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bermuda_eez_projected</span>, add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-bathymetry-1.png" style="display: block; margin: auto;"></p>
<div class="section level3">
<h3 id="depth-classification">Depth classification<a class="anchor" aria-label="anchor" href="#depth-classification"></a>
</h3>
<p>The ocean can be classified into 5 depth zones:</p>
<ul>
<li>0 - 200m: Epipelagic zone</li>
<li>200 - 1000m: Mesopelagic zone</li>
<li>1000 - 4000m: Bathypelagic zone</li>
<li>4000 - 6000m: Abyssopelagic zone</li>
<li>6000m+: Hadopelagic zone</li>
</ul>
<p>We can get the depth zones for Bermuda simply by setting the <code>classify_bathymetry</code> argument in <code>get_bathymetry</code> to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">depth_zones</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_bathymetry.html">get_bathymetry</a></span><span class="op">(</span>spatial_grid <span class="op">=</span> <span class="va">bermuda_grid</span>, classify_bathymetry <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; This may take seconds to minutes, depending on grid size</span></span>
<span></span>
<span><span class="co">#value of 1 indicates that depth zone is present</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">depth_zones</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey60"</span>, <span class="st">"navyblue"</span><span class="op">)</span>, axes <span class="op">=</span> <span class="cn">FALSE</span>, fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">bermuda_eez_projected</span><span class="op">)</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-depth_classification-1.png" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="get-geomorphological-data">Get geomorphological data<a class="anchor" aria-label="anchor" href="#get-geomorphological-data"></a>
</h2>
<p>The seafloor has its own valleys, plains and other geomorphological features just as on land. These data come from <a href="https://doi.org/10.1016/j.margeo.2014.01.011" class="external-link">Harris et al. 2014, Geomorphology of the Oceans</a> and are available for download from <a href="https://www.bluehabitats.org" class="external-link uri">https://www.bluehabitats.org</a>, but all but depth classifications (which can be created using <code><a href="reference/get_bathymetry.html">get_bathymetry()</a></code>) and seamounts (which can be retrieved from a more recent dataset using <code><a href="reference/get_seamounts.html">get_seamounts()</a></code>) are included in this package.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">geomorphology</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_geomorphology.html">get_geomorphology</a></span><span class="op">(</span>spatial_grid <span class="op">=</span> <span class="va">bermuda_grid</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">remove_empty_layers</span><span class="op">(</span><span class="op">)</span> <span class="co">#can remove any empty layers so we don't have so many layers to plot</span></span>
<span></span>
<span><span class="co">#brown colour indicates that geomorphological feature is present</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">geomorphology</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey60"</span>, <span class="st">"sienna"</span><span class="op">)</span><span class="op">)</span>, axes <span class="op">=</span> <span class="cn">FALSE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span>, fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">bermuda_eez_projected</span><span class="op">)</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-geomorphology-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="get-knolls-data">Get knolls data<a class="anchor" aria-label="anchor" href="#get-knolls-data"></a>
</h2>
<p>Knolls are another geomorphological feature, which are ‘small’ seamounts, classified as seamounts between 200 and 1000m higher than the surrounding seafloor <a href="https://doi.org/10.3354/meps07268" class="external-link">Morato et al. 2008</a>. Data are the knoll base area data from <a href="https://doi.org/10.1016/j.dsr.2011.02.004" class="external-link">Yesson et al. 2011</a>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">knolls</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_knolls.html">get_knolls</a></span><span class="op">(</span>spatial_grid <span class="op">=</span> <span class="va">bermuda_grid</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#value of 1 indicates that knolls are present</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">knolls</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey60"</span>, <span class="st">"grey20"</span><span class="op">)</span>, axes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bermuda_eez_projected</span>, add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-knolls-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="get-seamount-areas">Get seamount areas<a class="anchor" aria-label="anchor" href="#get-seamount-areas"></a>
</h2>
<p>Seamounts, classified as peaks at least 1000m higher than the surrounding seafloor <a href="https://doi.org/10.3354/meps07268" class="external-link">Morato et al. 2008</a>. These data are from <a href="https://doi.org/10.14324/111.444/ucloe.000030" class="external-link">Yesson et al. 2021</a>. Each peak is buffered to the distance specified in the function call. The units of the buffer are in the same units as the spatial grid, which can be checked using, e.g. <code>sf::st_crs(bermuda_grid, parameters = TRUE)$units_gdal</code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#spatial grid units are metres, so set buffer to 30000 m = 30 km</span></span>
<span><span class="va">seamounts</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_seamounts.html">get_seamounts</a></span><span class="op">(</span>spatial_grid <span class="op">=</span> <span class="va">bermuda_grid</span>, buffer <span class="op">=</span> <span class="fl">30000</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#value of 1 indicates that seamount is present</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">seamounts</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"grey60"</span>, <span class="st">"saddlebrown"</span><span class="op">)</span>, axes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bermuda_eez_projected</span>, add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-seamounts-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="habitat-suitability-models">Habitat suitability models<a class="anchor" aria-label="anchor" href="#habitat-suitability-models"></a>
</h2>
<p>Retrieve habitat suitability data for 3 deep water coral groups:</p>
<ul>
<li>Antipatharia: Habitats associated with increased biodiversity in both invertebrate and vertebrate species; global distributions were modeled by <a href="https://doi.org/10.1016/j.dsr2.2015.12.004" class="external-link">Yesson et al. (2017)</a>
</li>
<li>Cold water coral: Important habitats and nursery areas for many species; global distributions were modeled by <a href="https://doi.org/10.1371/journal.pone.0018483" class="external-link">Davies and Guinotte (2011)</a>
</li>
<li>Octocoral: Important habitats for invertebrates, groundfish, rockfish and other species; global distributions were modeled by <a href="https://doi.org/10.1111/j.1365-2699.2011.02681.x" class="external-link">Yesson et al. (2012)</a>
</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coral_habitat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_coral_habitat.html">get_coral_habitat</a></span><span class="op">(</span>spatial_grid <span class="op">=</span> <span class="va">bermuda_grid</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#show the seamounts areas on the plot: coral habitat is often on seamounts which are shallower than surrounding ocean floor</span></span>
<span></span>
<span><span class="co">#value of 1 indicates that coral is present</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">coral_habitat</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey60"</span>, <span class="st">"coral"</span><span class="op">)</span>, axes <span class="op">=</span> <span class="cn">FALSE</span>, fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/as.polygons.html" class="external-link">as.polygons</a></span><span class="op">(</span><span class="va">seamounts</span>, dissolve <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"orangered4"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-coral_habitat-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="environmental-regions">Environmental Regions<a class="anchor" aria-label="anchor" href="#environmental-regions"></a>
</h2>
<p>Bioregions are often included in spatial planning, but available bioregional classifications are either too coarse or too detailed to be useful for planning at the EEZ level. Borrowing methods from <a href="https://doi.org/10.1111/ddi.13183" class="external-link">Magris et al. 2020</a>, we use spatial clustering of biophysical environmental data from <a href="https://bio-oracle.org/" class="external-link">Bio-Oracle</a>, to create ‘environmental regions’. Biophysical conditions within a environmental region are more similar than areas outside that region, though the differences may be small. Diagnostic boxplots and a PCA will be shown if <code>show_plots = TRUE</code>. All the biophysical data are ocean surface data for the period 2010 - 2020:</p>
<ul>
<li>Chlorophyll concentration (mean, mg/ m3)</li>
<li>Dissolved oxygen concentration (mean)</li>
<li>Nitrate concentration (mean, mmol/ m3)</li>
<li>pH (mean)</li>
<li>Phosphate concentration (mean, mmol/ m3)</li>
<li>total Phytoplankton (primary productivity; mean, mmol/ m3)</li>
<li>Salinity (mean)</li>
<li>Sea surface temperature (max, degree C)</li>
<li>Sea surface temperature (mean, degree C)</li>
<li>Sea surface temperature (min, degree C)</li>
<li>Silicate concentration (mean, mmol/ m3)</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#set number of clusters to 3 to reduce runtime and memory usage</span></span>
<span><span class="va">enviro_regions</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_enviro_regions.html">get_enviro_regions</a></span><span class="op">(</span>spatial_grid <span class="op">=</span> <span class="va">bermuda_grid</span>, show_plots <span class="op">=</span> <span class="cn">TRUE</span>, num_clusters <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-environmental_regions-1.png" style="display: block; margin: auto;"><img src="reference/figures/README-environmental_regions-2.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#value of 1 indicates that environmental region is present</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">enviro_regions</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey60"</span>, <span class="st">"forestgreen"</span><span class="op">)</span>, axes <span class="op">=</span> <span class="cn">FALSE</span>, fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">bermuda_eez_projected</span><span class="op">)</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-enviro_regions_maps-1.png" style="display: block; margin: auto;"></p>
</div>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3) + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing oceandatr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jason Flower <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6731-8182" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jason Flower.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
