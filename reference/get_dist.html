<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get distance to port or shore for a spatial grid — get_dist • oceandatr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get distance to port or shore for a spatial grid — get_dist"><meta name="description" content="Calculates distance from shore, port or anchorage for each grid
cell in the provided spatial grid. Spatial grid can be terra::rast() or
sf format."><meta property="og:description" content="Calculates distance from shore, port or anchorage for each grid
cell in the provided spatial grid. Spatial grid can be terra::rast() or
sf format."><meta property="og:image" content="https://emlab-ucsb.github.io/oceandatr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oceandatr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/getboundary.html">Retrieving boundaries with get_boundary()</a></li>
    <li><a class="dropdown-item" href="../articles/pacific_high_seas_example.html">Pacific High Seas Example</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get distance to port or shore for a spatial grid</h1>

      <div class="d-none name"><code>get_dist.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates distance from shore, port or anchorage for each grid
cell in the provided spatial grid. Spatial grid can be <code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code> or
<code>sf</code> format.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_dist</span><span class="op">(</span></span>
<span>  <span class="va">spatial_grid</span>,</span>
<span>  dist_to <span class="op">=</span> <span class="st">"shore"</span>,</span>
<span>  raw <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  inverse <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  antimeridian <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-spatial-grid">spatial_grid<a class="anchor" aria-label="anchor" href="#arg-spatial-grid"></a></dt>
<dd><p><code>sf</code> or <code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code> grid, e.g. created using
<code><a href="https://emlab-ucsb.github.io/spatialgridr/reference/get_grid.html" class="external-link">get_grid()</a></code>. Alternatively, if raw data is required, an <code>sf</code> polygon can
be provided, e.g. created using <code><a href="https://emlab-ucsb.github.io/spatialgridr/reference/get_boundary.html" class="external-link">get_boundary()</a></code>, and set <code>raw = TRUE</code>.</p></dd>


<dt id="arg-dist-to">dist_to<a class="anchor" aria-label="anchor" href="#arg-dist-to"></a></dt>
<dd><p><code>character</code> which data to use to calculate distance to.
Default is <code>"shore"</code> (Natural Earth land polygons); other possible values
are <code>"ports"</code> (WPI Ports), <code>"anchorages_land_masked"</code>,
<code>"anchorages_grouped"</code> and <code>"anchorages_all"</code> (GFW anchorages).</p></dd>


<dt id="arg-raw">raw<a class="anchor" aria-label="anchor" href="#arg-raw"></a></dt>
<dd><p><code>logical</code> set to TRUE to retrieve the raw shore, port or anchorage
data within the extent of the <code>spatial_grid</code>. Note that the closest shore,
port or anchorage may be outside the extent.</p></dd>


<dt id="arg-inverse">inverse<a class="anchor" aria-label="anchor" href="#arg-inverse"></a></dt>
<dd><p><code>logical</code> set to <code>TRUE</code> to get the inverse of distance, i.e.
highest values become lowest and vice versa. Can be useful if the result is
to be used as a proxy for fishing activity, where the closer a grid cell is
to the port or shore, the more fishing activity there might be. Default is
<code>FALSE</code>.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p><code>string</code>; name of raster or column in sf object that is returned</p></dd>


<dt id="arg-antimeridian">antimeridian<a class="anchor" aria-label="anchor" href="#arg-antimeridian"></a></dt>
<dd><p>Does <code>spatial_grid</code> span the antimeridian? If so, this
should be set to <code>TRUE</code>, otherwise set to <code>FALSE</code>. If set to <code>NULL</code>
(default) the function will try to check if <code>spatial_grid</code> spans the
antimeridian and set this appropriately.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a <code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast</a></code> or <code>sf</code> object (same type as <code>spatial_grid</code> input)
with distance to shore for each grid cell.</p>
    </div>
    <div class="section level2">
    <h2 id="shore">Shore<a class="anchor" aria-label="anchor" href="#shore"></a></h2>



<p>The Natural Earth high resolution land polygons are used as the shoreline
and are downloaded from the Natural Earth website
(https://www.naturalearthdata.com/downloads/10m-physical-vectors/), so an
internet connection is required.</p>
    </div>
    <div class="section level2">
    <h2 id="ports">Ports<a class="anchor" aria-label="anchor" href="#ports"></a></h2>



<p>Port locations are downloaded directly from the World Port Index (Pub 150):
https://msi.nga.mil/Publications/WPI.</p>
    </div>
    <div class="section level2">
    <h2 id="anchorages">Anchorages<a class="anchor" aria-label="anchor" href="#anchorages"></a></h2>



<p>The anchorages data is from Global Fishing Watch and identifies anchorages as
anywhere vessels with AIS remain stationary for 12 hours or more (see
https://globalfishingwatch.org/datasets-and-code-anchorages/). This results
in a very large number of points (~167,000). Calculating distance from all
these points to each grid cell is computationally expensive. Anchorages close
together have the same names, so to reduce the number of anchorages, they are
aggregated by iso3 code (country code) and label (name) and the mean
longitude and latitude coordinates obtained to get one anchorage point per
name in each country. This data can be used by specifying <code>dist_to = "anchorages_grouped"</code>.</p>
<p>To further reduce the number of points, anchorages within countries' land
boundaries, e.g. along rivers, can be removed. I do this by buffering the
Natural Earth land boundaries by 10km inland so as to avoid cutting off
coastal anchorages that fall within the land boundary, due to inaccuracies in
the Natural Earth land boundaries, e.g. for islands and other small scale
coastlines, and then masking points that fall within the resulting polygons.
This data can be used by specifying <code>dist_to = "anchorages_land_masked"</code>.</p>
<p>The full anchorages dataset can be used by specifying <code>dist_to = "anchorages_all"</code>, but this option may take a long time to calculate and/ or
cause your system to hang.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Get some EEZ data first </span></span></span>
<span class="r-in"><span><span class="va">fiji_eez</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://emlab-ucsb.github.io/spatialgridr/reference/get_boundary.html" class="external-link">get_boundary</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Fiji"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Get a raster spatial grid for Fiji</span></span></span>
<span class="r-in"><span><span class="va">fiji_grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://emlab-ucsb.github.io/spatialgridr/reference/get_grid.html" class="external-link">get_grid</a></span><span class="op">(</span>boundary <span class="op">=</span> <span class="va">fiji_eez</span>, crs <span class="op">=</span> <span class="fl">32760</span>, resolution <span class="op">=</span> <span class="fl">20000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#get distance from shore for each cell in the raster</span></span></span>
<span class="r-in"><span><span class="va">dist_from_shore_rast</span> <span class="op">&lt;-</span> <span class="fu">get_dist</span><span class="op">(</span><span class="va">fiji_grid</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dist_from_shore_rast</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="get_dist-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#get distance to ports</span></span></span>
<span class="r-in"><span><span class="va">dist_ports</span> <span class="op">&lt;-</span> <span class="fu">get_dist</span><span class="op">(</span><span class="va">fiji_grid</span>, dist_to <span class="op">=</span> <span class="st">"ports"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dist_ports</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="get_dist-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#get distance to anchorages, as defined by Global Fishing Watch data</span></span></span>
<span class="r-in"><span><span class="va">dist_anchorages</span> <span class="op">&lt;-</span> <span class="fu">get_dist</span><span class="op">(</span><span class="va">fiji_grid</span>, dist_to <span class="op">=</span> <span class="st">"anchorages_land_masked"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dist_anchorages</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="get_dist-3.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jason Flower.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

